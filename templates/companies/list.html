{% extends "base.html" %}
{% block title %}Companies - RefCheck AI{% endblock %}

{% block content %}
<div class="page-header" style="display:flex; justify-content: space-between; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
  <div>
    <h1 style="font-size: 1.75rem; font-weight: 600; letter-spacing: -0.02em; margin-bottom: 0.25rem;">Companies</h1>
    <p style="color: var(--text-secondary);">Manage your company profiles and organize jobs.</p>
  </div>
  <a class="btn btn-primary" href="{{ url_for('companies.new_company') }}">New Company</a>
</div>

<div class="card">
  <div class="card-header">
    <span>Your companies</span>
    <span style="font-weight: 400; color: var(--text-muted); font-size: 0.85rem;">{{ companies|length }} total</span>
  </div>
  <div class="card-body">
    {% if companies|length == 0 %}
      <p style="color: var(--text-muted);">No companies yet. Create your first company profile.</p>
      <div class="mt-2">
        <a class="btn btn-primary" href="{{ url_for('companies.new_company') }}">Create a company</a>
      </div>
    {% else %}
      <div style="display:flex; flex-direction: column; gap: 0.75rem;">
        {% for company in companies %}
          <a class="card" href="{{ url_for('companies.view_company', company_id=company.id) }}" style="text-decoration:none;">
            <div class="card-body" style="padding: 1.25rem 1.5rem; display:flex; justify-content: space-between; align-items: center; gap: 1rem;">
              <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 600; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                  {{ company.name }}
                </div>
                <div style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.125rem;">
                  {% if company.website %}
                    <a href="{{ company.website }}" target="_blank" style="color: var(--text-muted);">{{ company.website }}</a>
                  {% else %}
                    No website
                  {% endif %}
                </div>
              </div>
              <div style="display:flex; align-items: center; gap: 0.75rem; flex-shrink: 0;">
                <span style="color: var(--text-muted); font-size: 0.85rem;">
                  {% set count = company.job_count|default(0) %}
                  {{ count }} {{ 'job' if count == 1 else 'jobs' }}
                </span>
                <span style="color: var(--text-muted); font-size: 0.85rem;">
                  Updated {{ company.updated_at.strftime('%b %d') if company.updated_at else '' }}
                </span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
