{% extends "base.html" %}
{% block title %}Jobs - RefCheck AI{% endblock %}

{% block content %}
<div class="page-header" style="display:flex; justify-content: space-between; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
  <div>
    <h1 style="font-size: 1.75rem; font-weight: 600; letter-spacing: -0.02em; margin-bottom: 0.25rem;">Jobs</h1>
    <p style="color: var(--text-secondary);">Create job postings, collect applications, and screen applicants.</p>
  </div>
  <a class="btn btn-primary" href="{{ url_for('new_job') }}">New Job</a>
</div>

<div class="card">
  <div class="card-header">
    <span>Your job postings</span>
    <span style="font-weight: 400; color: var(--text-muted); font-size: 0.85rem;">{{ postings|length }} total</span>
  </div>
  <div class="card-body">
    {% if postings|length == 0 %}
      <p style="color: var(--text-muted);">No job postings yet. Create your first one.</p>
      <div class="mt-2">
        <a class="btn btn-primary" href="{{ url_for('new_job') }}">Create a job</a>
      </div>
    {% else %}
      <div style="display:flex; flex-direction: column; gap: 0.75rem;">
        {% for job in postings %}
          <a class="card" href="{{ url_for('job_detail', job_id=job.id) }}" style="text-decoration:none;">
            <div class="card-body" style="padding: 1.25rem 1.5rem; display:flex; justify-content: space-between; align-items: center; gap: 1rem;">
              <div style="min-width: 0;">
                <div style="font-weight: 600; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                  {{ job.title }}
                </div>
                <div style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.125rem;">
                  {{ job.department or '—' }} • {{ job.location or '—' }} • {{ job.employment_type or '—' }}
                </div>
              </div>
              <div style="display:flex; align-items: center; gap: 0.75rem; flex-shrink: 0;">
                {% set status = job.status or 'draft' %}
                <span class="status-badge {{ status }}" style="background: var(--bg-tertiary); color: var(--text-muted);">
                  {{ status|capitalize }}
                </span>
                <span style="color: var(--text-muted); font-size: 0.85rem;">
                  Updated {{ job.updated_at.strftime('%b %d') if job.updated_at else '' }}
                </span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}

